<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>湖北电信云中台DeepSeek推理算力部署计算器</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/alpinejs/3.12.0/cdn.min.js" defer></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        :root {
            --color-primary: #5E6AD2;
            --color-primary-hover: #4F58C4;
            --color-success: #0E9F6E;
            --color-warning: #FFA500;
            --color-danger: #EF4444;
            --color-background: #FFFFFF;
            --color-foreground: #111827;
            --color-card: #FFFFFF;
            --color-card-border: #E5E7EB;
            --color-input-border: #D1D5DB;
            --color-input-bg: #F9FAFB;
            --color-input-text: #111827;
            --color-muted: #6B7280;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        .dark {
            --color-primary: #6E78DE;
            --color-primary-hover: #8590E8;
            --color-success: #10B981;
            --color-warning: #FBBF24;
            --color-danger: #F87171;
            --color-background: #111827;
            --color-foreground: #F9FAFB;
            --color-card: #1F2937;
            --color-card-border: #374151;
            --color-input-border: #4B5563;
            --color-input-bg: #374151;
            --color-input-text: #F9FAFB;
            --color-muted: #9CA3AF;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.2);
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.15);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.15);
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--color-background);
            color: var(--color-foreground);
            transition: all 0.2s ease;
        }

        .container {
            max-width: 1024px;
            margin: 0 auto;
        }

        .card {
            background-color: var(--color-card);
            border: 1px solid var(--color-card-border);
            border-radius: 0.5rem;
            box-shadow: var(--shadow);
            transition: all 0.2s ease;
        }

        .card:hover {
            box-shadow: var(--shadow-lg);
            transform: translateY(-2px);
        }

        input, select {
            background-color: var(--color-input-bg);
            color: var(--color-input-text);
            border: 1px solid var(--color-input-border);
            border-radius: 0.375rem;
            padding: 0.5rem 0.75rem;
            transition: all 0.2s ease;
            width: 100%;
        }

        input:focus, select:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(94, 106, 210, 0.2);
        }

        button {
            background-color: var(--color-primary);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        button:hover {
            background-color: var(--color-primary-hover);
            transform: translateY(-1px);
        }

        button:active {
            transform: translateY(0);
        }

        .stats-bar {
            background-color: var(--color-card);
            border-bottom: 1px solid var(--color-card-border);
        }

        .help-text {
            color: var(--color-muted);
            font-size: 0.875rem;
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px dashed var(--color-card-border);
        }

        .result-item:last-child {
            border-bottom: none;
        }

        .result-label {
            font-weight: 500;
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in forwards;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* 响应式设计调整 */
        @media (max-width: 768px) {
            .input-grid {
                grid-template-columns: 1fr;
            }
        }

        /* 切换按钮样式 */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 48px;
            height: 24px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background-color: var(--color-primary);
        }

        input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }

        /* 社交媒体图标样式 */
        .social-icon {
            color: var(--color-muted);
            transition: all 0.2s ease;
        }

        .social-icon:hover {
            color: var(--color-primary);
            transform: translateY(-2px);
        }
    </style>
</head>
<body x-data="{ darkMode: localStorage.getItem('darkMode') === 'true' || (!('darkMode' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches), 
                modelData: null,
                totalUsers: '--', 
                activeUsers: '--',
                liveMode: false }" 
      :class="{'dark': darkMode}" 
      x-init="() => {
          $watch('darkMode', val => localStorage.setItem('darkMode', val));
          fetchModelData();
          fetchUserStats();
          setInterval(() => { if(liveMode) fetchUserStats(); }, 30000);
      }">

    <!-- 顶部统计条 -->
    <div class="stats-bar py-2 px-4 text-center text-sm text-gray-600 dark:text-gray-300 sticky top-0 z-10 shadow-sm flex justify-between">
        <div></div>
        <div>
            已有<span class="font-semibold mx-1" x-text="totalUsers"></span>人使用过此工具 | 当前在线：<span class="font-semibold mx-1" x-text="activeUsers"></span>人
            <button @click="liveMode = !liveMode" class="ml-2 text-xs px-2 py-1 rounded" :class="liveMode ? 'bg-green-500' : 'bg-gray-400'">
                <i class="fas fa-sync-alt mr-1" :class="{'animate-spin': liveMode}"></i>
                <span x-text="liveMode ? '实时更新中' : '实时更新'"></span>
            </button>
        </div>
        <div>
            <label class="toggle-switch">
                <input type="checkbox" x-model="darkMode">
                <span class="toggle-slider"></span>
            </label>
            <span class="ml-2 text-sm">
                <i class="fas" :class="darkMode ? 'fa-moon' : 'fa-sun'"></i>
            </span>
        </div>
    </div>

    <div class="container px-4 py-8">
        <header class="text-center mb-10">
            <h1 class="text-3xl font-bold mb-2">湖北电信云中台DeepSeek推理算力部署计算器</h1>
            <p class="text-sm text-gray-500 dark:text-gray-400">精确计算模型部署所需的硬件资源</p>
        </header>

        <div class="card p-6 mb-8 fade-in">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 input-grid">
                <!-- 模型类型 -->
                <div>
                    <label for="model-type" class="block mb-2 font-medium">模型类型</label>
                    <select id="model-type" class="form-select">
                        <option value="r1_671b">DeepSeek R1/V3 671B</option>
                        <option value="r1_1.5b">DeepSeek R1 1.5B (蒸馏)</option>
                        <option value="r1_7b">DeepSeek R1 7B (蒸馏)</option>
                        <option value="r1_8b">DeepSeek R1 8B (蒸馏)</option>
                        <option value="r1_14b">DeepSeek R1 14B (蒸馏)</option>
                        <option value="r1_32b">DeepSeek R1 32B (蒸馏)</option>
                        <option value="r1_70b">DeepSeek R1 70B (蒸馏)</option>
                    </select>
                </div>

                <!-- 参数精度 -->
                <div>
                    <label for="precision" class="block mb-2 font-medium">参数精度</label>
                    <select id="precision" class="form-select">
                        <option value="fp16">FP16</option>
                        <option value="fp8">FP8</option>
                        <option value="bf16">BF16</option>
                        <option value="int8">INT8</option>
                        <option value="int4">INT4</option>
                    </select>
                </div>

                <!-- 并发数 -->
                <div>
                    <label for="concurrency" class="block mb-2 font-medium">并发数</label>
                    <input type="number" id="concurrency" value="1" min="1" class="form-input">
                </div>

                <!-- 上下文长度 -->
                <div>
                    <label for="context-length" class="block mb-2 font-medium">上下文长度 (Token数)</label>
                    <select id="context-length" class="form-select">
                        <option value="4096">4K (4096)</option>
                        <option value="8192" selected>8K (8192)</option>
                        <option value="32768">32K (32768)</option>
                        <option value="65536">64K (65536)</option>
                    </select>
                </div>

                <!-- 推理框架 -->
                <div>
                    <label for="framework" class="block mb-2 font-medium">推理框架</label>
                    <select id="framework" class="form-select">
                        <option value="auto">自动/通用 (简化估算)</option>
                        <option value="vllm">vLLM (高性能)</option>
                        <option value="sglang">SGLang (高效显存)</option>
                        <option value="llama_cpp">llama.cpp (CPU/GPU混合)</option>
                        <option value="mindspore">MindSpore (华为昇腾)</option>
                    </select>
                    <p class="help-text mt-1">影响性能和显存管理效率</p>
                </div>

                <!-- 微调方法 -->
                <div>
                    <label for="fine-tuning-method" class="block mb-2 font-medium">微调方法</label>
                    <select id="fine-tuning-method" class="form-select" @change="document.getElementById('lora-params-section').style.display = this.value === 'lora' ? 'block' : 'none'">
                        <option value="inference">推理 (Inference)</option>
                        <option value="lora">LoRA 微调</option>
                    </select>
                </div>

                <!-- LoRA 可训练参数 (条件显示) -->
                <div id="lora-params-section" style="display: none;">
                    <label for="lora-trainable-params" class="block mb-2 font-medium">LoRA 可训练参数 (Billion)</label>
                    <input type="number" id="lora-trainable-params" value="0" min="0" step="0.1" class="form-input">
                </div>

                <!-- 算力卡 -->
                <div>
                    <label for="hardware" class="block mb-2 font-medium">算力卡</label>
                    <select id="hardware" class="form-select">
                        <option value="ascend910b64">华为昇腾910b-64g</option>
                        <option value="ascend910b32">华为昇腾910b-32g</option>
                        <option value="nvidia_l20">NVIDIA L20</option>
                        <option value="nvidia_h20">NVIDIA H20</option>
                        <option value="nvidia_h800">NVIDIA H800</option>
                        <option value="nvidia_a800">NVIDIA A800</option>
                        <option value="nvidia_l40s">NVIDIA L40S</option>
                        <option value="nvidia_a10">NVIDIA A10</option>
                        <option value="nvidia_rtx4090">NVIDIA RTX 4090</option>
                        <option value="nvidia_a100_40g">NVIDIA A100-40G</option>
                    </select>
                </div>

                <!-- 显存预估模式 -->
                <div>
                    <label for="memory-estimation-mode" class="block mb-2 font-medium">显存预估模式</label>
                    <select id="memory-estimation-mode" class="form-select">
                        <option value="practical">实际模式 (考虑框架内存管理)</option>
                        <option value="theoretical">理论模式 (完全线性计算)</option>
                    </select>
                    <p class="help-text mt-1">实际模式考虑推理框架的内存预分配和重用特性，更接近真实部署</p>
                </div>
            </div>

            <!-- 计算按钮 -->
            <div class="mt-8 text-center">
                <button id="calculate-button" class="px-6 py-3 rounded-lg text-white font-medium inline-flex items-center justify-center transition-all duration-200 ease-in-out" @click="calculateResults()">
                    <i class="fas fa-calculator mr-2"></i>
                    计算算力需求
                </button>
            </div>
        </div>

        <!-- 结果区域 -->
        <div id="results" class="card p-6 mb-8 hidden fade-in">
            <h2 class="text-xl font-bold mb-4 flex items-center">
                <i class="fas fa-chart-bar text-primary mr-2"></i>
                计算结果
            </h2>
            <div id="result-content" class="space-y-4">
                <!-- 计算结果将在这里动态生成 -->
            </div>
        </div>

        <!-- 说明卡片 -->
        <div class="card p-6 mb-8 fade-in">
            <h2 class="text-xl font-bold mb-4 flex items-center">
                <i class="fas fa-info-circle text-primary mr-2"></i>
                使用说明
            </h2>
            <div class="space-y-3 text-sm">
                <p><span class="font-medium">模型类型:</span> 选择您要部署的DeepSeek模型版本。不同的模型大小会显著影响所需的硬件资源。</p>
                <p><span class="font-medium">参数精度:</span> 较低的精度可减少内存需求，但可能影响模型性能。FP16为常见选择，INT4/INT8用于量化场景。</p>
                <p><span class="font-medium">并发数:</span> 同时处理的请求数量，更高的并发需要更多内存资源。</p>
                <p><span class="font-medium">上下文长度:</span> 模型能处理的最大文本长度，更长的上下文需要更多内存。</p>
                <p><span class="font-medium">推理框架:</span> 不同框架有不同的优化策略，影响资源利用效率。</p>
                <p><span class="font-medium">微调方法:</span> 选择只进行推理或使用LoRA进行微调。微调需要额外的显存资源。</p>
                <p><span class="font-medium">算力卡:</span> 所使用的GPU或加速器类型，不同硬件有不同的内存大小和计算能力。</p>
            </div>
        </div>

        <!-- 作者信息 -->
        <footer class="card p-6 fade-in">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div>
                    <h3 class="text-lg font-bold">作者信息</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400">作者姓名: W.L</p>
                    <p class="text-sm text-gray-500 dark:text-gray-400">版权所有 © 2025</p>
                </div>
                <div class="flex space-x-4 mt-4 md:mt-0">
                    <a href="https://github.com/" target="_blank" class="social-icon">
                        <i class="fab fa-github fa-2x"></i>
                    </a>
                    <a href="https://twitter.com/" target="_blank" class="social-icon">
                        <i class="fab fa-twitter fa-2x"></i>
                    </a>
                    <a href="https://linkedin.com/" target="_blank" class="social-icon">
                        <i class="fab fa-linkedin fa-2x"></i>
                    </a>
                </div>
            </div>
        </footer>
    </div>

    <script>
        function alpineInit() {
            return {
                // 模型数据配置
                modelConfigs: {
                    r1_671b: { name: "DeepSeek R1/V3 671B", params: 671 },
                    r1_1.5b: { name: "DeepSeek R1 1.5B (蒸馏)", params: 1.5 },
                    r1_7b: { name: "DeepSeek R1 7B (蒸馏)", params: 7 },
                    r1_8b: { name: "DeepSeek R1 8B (蒸馏)", params: 8 },
                    r1_14b: { name: "DeepSeek R1 14B (蒸馏)", params: 14 },
                    r1_32b: { name: "DeepSeek R1 32B (蒸馏)", params: 32 },
                    r1_70b: { name: "DeepSeek R1 70B (蒸馏)", params: 70 }
                },
                // 精度内存乘数
                precisionMultipliers: {
                    fp16: 2,
                    fp8: 1,
                    bf16: 2,
                    int8: 1,
                    int4: 0.5
                },
                // 硬件配置
                hardwareConfigs: {
                    ascend910b64: { name: "华为昇腾910b-64g", memory: 64, tflops: 300 },
                    ascend910b32: { name: "华为昇腾910b-32g", memory: 32, tflops: 200 },
                    nvidia_l20: { name: "NVIDIA L20", memory: 24, tflops: 180 },
                    nvidia_h20: { name: "NVIDIA H20", memory: 32, tflops: 148 },
                    nvidia_h800: { name: "NVIDIA H800", memory: 80, tflops: 990 },
                    nvidia_a800: { name: "NVIDIA A800", memory: 80, tflops: 624 },
                    nvidia_l40s: { name: "NVIDIA L40S", memory: 48, tflops: 390 },
                    nvidia_a10: { name: "NVIDIA A10", memory: 24, tflops: 125 },
                    nvidia_rtx4090: { name: "NVIDIA RTX 4090", memory: 24, tflops: 330 },
                    nvidia_a100_40g: { name: "NVIDIA A100-40G", memory: 40, tflops: 312 }
                },
                // 框架效率系数
                frameworkEfficiency: {
                    auto: { memoryEfficiency: 0.85, perfMultiplier: 1.0 },
                    vllm: { memoryEfficiency: 0.95, perfMultiplier: 1.5 },
                    sglang: { memoryEfficiency: 0.90, perfMultiplier: 1.3 },
                    llama_cpp: { memoryEfficiency: 0.80, perfMultiplier: 0.7 },
                    mindspore: { memoryEfficiency: 0.88, perfMultiplier: 1.2 }
                },
                
                // 获取用户统计
                fetchUserStats() {
                    // 模拟数据获取，实际项目中应替换为真实API调用
                    this.totalUsers = Math.floor(Math.random() * 2000) + 1000;
                    this.activeUsers = Math.floor(Math.random() * 50) + 10;
                },
                
                // 计算结果
                calculateResults() {
                    const modelType = document.getElementById('model-type').value;
                    const precision = document.getElementById('precision').value;
                    const concurrency = parseInt(document.getElementById('concurrency').value);
                    const contextLength = parseInt(document.getElementById('context-length').value);
                    const framework = document.getElementById('framework').value;
                    const finetuningMethod = document.getElementById('fine-tuning-method').value;
                    const hardware = document.getElementById('hardware').value;
                    const memoryMode = document.getElementById('memory-estimation-mode').value;
                    let loraParams = 0;
                    
                    if (finetuningMethod === 'lora') {
                        loraParams = parseFloat(document.getElementById('lora-trainable-params').value);
                    }
                    
                    // 获取配置信息
                    const model = this.modelConfigs[modelType];
                    const precisionMultiplier = this.precisionMultipliers[precision];
                    const hardwareInfo = this.hardwareConfigs[hardware];
                    const frameworkInfo = this.frameworkEfficiency[framework];
                    
                    // 基本内存计算 (公式: 参数数量 * 精度大小 / 内存效率)
                    const baseMemoryPerParam = precisionMultiplier / 8; // 转换为GB
                    let baseMemoryGB = model.params * baseMemoryPerParam;
                    
                    // 上下文内存 (根据上下文长度和模型大小估算)
                    const tokenMemoryOverhead = (contextLength / 1000) * 0.01 * model.params * precisionMultiplier / 8;
                    
                    // 考虑框架内存效率
                    const totalBaseMemory = baseMemoryGB / frameworkInfo.memoryEfficiency;
                    
                    // 并发内存计算 (考虑内存共享)
                    let totalMemory;
                    if (memoryMode === 'practical') {
                        // 实际模式: 考虑参数共享，只有激活值和中间状态需要复制
                        const activationMemory = tokenMemoryOverhead * 2; // 激活值与中间状态
                        totalMemory = totalBaseMemory + (activationMemory * concurrency);
                    } else {
                        // 理论模式: 线性增长
                        totalMemory = totalBaseMemory * concurrency;
                    }
                    
                    // 添加LoRA微调额外内存 (如果适用)
                    if (finetuningMethod === 'lora' && loraParams > 0) {
                        totalMemory += loraParams * baseMemoryPerParam * 2; // LoRA参数和梯度
                    }
                    
                    // 计算所需GPU数量
                    const gpusRequired = Math.ceil(totalMemory / hardwareInfo.memory);
                    
                    // 计算推理性能 (每秒token)
                    const baseTokensPerSecond = (hardwareInfo.tflops * frameworkInfo.perfMultiplier) / (model.params * 0.01);
                    const tokensPerSecond = baseTokensPerSecond / concurrency;
                    
                    // 生成结果HTML
                    const resultsDiv = document.getElementById('results');
                    const resultContent = document.getElementById('result-content');
                    
                    resultContent.innerHTML = `
                        <div class="bg-blue-50 dark:bg-blue-900/30 p-4 rounded-lg mb-4">
                            <h3 class="font-bold text-lg mb-2">配置摘要</h3>
                            <p>模型: ${model.name} (${model.params}B 参数)</p>
                            <p>精度: ${precision.toUpperCase()}</p>
                            <p>并发请求数: ${concurrency}</p>
                            <p>上下文长度: ${contextLength} tokens</p>
                            <p>推理框架: ${framework}</p>
                            <p>硬件: ${hardwareInfo.name} (${hardwareInfo.memory}GB)</p>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-lg">
                                <h3 class="font-bold mb-2">显存需求</h3>
                                <div class="result-item">
                                    <span class="result-label">基础模型显存:</span>
                                    <span>${baseMemoryGB.toFixed(2)} GB</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">上下文额外显存:</span>
                                    <span>${tokenMemoryOverhead.toFixed(2)} GB</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">总显存需求:</span>
                                    <span class="font-bold">${totalMemory.toFixed(2)} GB</span>
                                </div>
                                ${finetuningMethod === 'lora' ? `
                                <div class="result-item">
                                    <span class="result-label">LoRA额外显存:</span>
                                    <span>${(loraParams * baseMemoryPerParam * 2).toFixed(2)} GB</span>
                                </div>`:''}
                            </div>
                            
                            <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-lg">
                                <h3 class="font-bold mb-2">硬件需求</h3>
                                <div class="result-item">
                                    <span class="result-label">所需${hardwareInfo.name}数量:</span>
                                    <span class="font-bold">${gpusRequired}</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">单卡利用率:</span>
                                    <span>${Math.min(100, (totalMemory / (gpusRequired * hardwareInfo.memory) * 100)).toFixed(1)}%</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">理论推理速度:</span>
                                    <span>${tokensPerSecond.toFixed(1)} 词元/秒</span>
                                </div>
                                <div class="result-item">
                                    <span class="result-label">2K生成耗时估计:</span>
                                    <span>${(2000 / tokensPerSecond).toFixed(1)} 秒</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-4 p-4 ${totalMemory > gpusRequired * hardwareInfo.memory ? 'bg-red-50 dark:bg-red-900/30' : 'bg-green-50 dark:bg-green-900/30'} rounded-lg">
                            <h3 class="font-bold mb-2">兼容性分析</h3>
                            ${totalMemory > gpusRequired * hardwareInfo.memory ? 
                                `<p class="flex items-center text-red-600 dark:text-red-400"><i class="fas fa-exclamation-triangle mr-2"></i> 警告：当前配置所需显存(${totalMemory.toFixed(2)}GB)超过可用显存(${(gpusRequired * hardwareInfo.memory).toFixed(1)}GB)，可能无法正常运行</p>` : 
                                `<p class="flex items-center text-green-600 dark:text-green-400"><i class="fas fa-check-circle mr-2"></i> 当前配置可在${gpusRequired}张${hardwareInfo.name}上正常运行。</p>`
                            }
                            <p class="mt-2">建议: ${
                                totalMemory > hardwareInfo.memory * 1.2 ? 
                                    `考虑使用更多${hardwareInfo.name}或选择更大内存的算力卡` : 
                                    totalMemory < hardwareInfo.memory * 0.5 ? 
                                        `可增加并发数或使用更长上下文以提高资源利用率` : 
                                        `当前配置较为合理`
                            }</p>
                        </div>
                    `;
                    
                    // 显示结果
                    resultsDiv.classList.remove('hidden');
                    
                    // 添加动画效果
                    resultsDiv.classList.remove('fade-in');
                    void resultsDiv.offsetWidth; // 触发重排以重置动画
                    resultsDiv.classList.add('fade-in');
                    
                    // 滚动到结果区域
                    resultsDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
            }
        }

        // 当页面加载完成后执行
        document.addEventListener('DOMContentLoaded', function() {
            // 绑定模型选择变更事件
            document.getElementById('fine-tuning-method').addEventListener('change', function() {
                const loraSection = document.getElementById('lora-params-section');
                loraSection.style.display = this.value === 'lora' ? 'block' : 'none';
            });
            
            // 绑定计算按钮点击事件
            document.getElementById('calculate-button').addEventListener('click', function() {
                // Alpine方法会处理计算逻辑
            });
        });

        // 模拟用户统计数据 (实际应用中应替换为Firebase或其他后端服务)
        function fetchModelData() {
            // 在实际项目中，这里可以从API获取真实的模型数据
            console.log('模型数据已加载');
        }

        function fetchUserStats() {
            // 模拟Firebase数据获取
            // 在实际项目中，这里应该从Firebase或其他服务获取真实的用户统计
            const totalUsers = 1000 + Math.floor(Math.random() * 500);
            const activeUsers = 5 + Math.floor(Math.random() * 20);
            
            document.getElementById('total-users').textContent = totalUsers;
            document.getElementById('active-users').textContent = activeUsers;
            
            return { total: totalUsers, active: activeUsers };
        }
    </script>
</body>
</html>
